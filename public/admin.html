<!DOCTYPE html>
<html lang="en" class="antialiased">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DataTables </title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!--Replace with your tailwind.css once created-->

  <!--Regular Datatables CSS-->
  <link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
  <!--Responsive Extension Datatables CSS-->
  <link href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css" rel="stylesheet">

  <link rel="stylesheet" href="../assets/CSS/dt.css">
</head>

<body style="background-image: linear-gradient(315deg, #119bea 0%, #000000 92%)" class="text-gray-900 tracking-wider leading-normal">
<!--Container 1-->
<div class="container w-full md:w-4/5 xl:w-3/5  mx-auto px-2 mt-12">
  <!--Title-->
  <h1 class="flex items-center font-sans font-bold break-normal text-white px-2 py-8 text-xl md:text-2xl">
    Complaints
  </h1>
  <!--Card 1-->
    <div id='recipients-1' class="p-8 mt-6 lg:mt-0 rounded shadow bg-white">
      <table id="example-1" class="stripe hover" style="width:100%; padding-top: 1em;  padding-bottom: 1em;">
        <thead>
          <tr>
            <th data-priority="1">Complaint ID</th>
            <th data-priority="2">Place</th>
            <th data-priority="3">Date</th>
            <th data-priority="4">User Name</th>
            <th data-priority="5">Department</th>
            <th data-priority="6">Position</th>
            <th data-priority="7">Contact Number</th>
            <th data-priority="8">Email</th>
            <th data-priority="9">Hardware Type</th>
            <th data-priority="10">Hardware Serial Number</th>
            <th data-priority="11">Comment</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>001</td>
            <td>Head Office</td>
            <td>2022-01-01</td>
            <td>John Doe</td>
            <td>IT</td>
            <td>Software Engineer</td>
            <td>1234567890</td>
            <td>johndoe@example.com</td>
            <td>Laptop</td>
            <td>ABC123456</td>
            <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
          </tr>
          <tr>
            <td>002</td>
            <td>Branch Office</td>
            <td>2022-01-02</td>
            <td>Jane Doe</td>
            <td>IT</td>
            <td>Hardware Engineer</td>
            <td>9876543210</td>
            <td>janedoe@example.com</td>
            <td>Desktop</td>
            <td>DEF789012</td>
            <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
          </tr>
          <!-- Add more data rows here -->
        </tbody>
      </table>
    </div>
    <!--/Card 1-->
  </div>
  <!--/container 1-->

   <!--Container 2-->
   <div class="container w-full md:w-4/5 xl:w-3/5  mx-auto px-2 mt-12">
    <!--Title-->
    <h1 class="flex items-center font-sans font-bold break-normal text-white px-2 py-8 text-xl md:text-2xl">
      Reports
    </h1>
<!--Card 2-->
<div id='recipients-2' class="p-8 mt-6 lg:mt-0 rounded shadow bg-white">
  <table id="example-2" class="stripe hover" style="width:100%; padding-top: 1em;  padding-bottom: 1em;">
    <thead>
      <tr>
        <th data-priority="1">Complaint ID</th>
        <th data-priority="2">EU Name</th>
        <th data-priority="3">Job Card Number</th>
        <th data-priority="4">Service Date</th>
        <th data-priority="5">Service Time</th>
        <th data-priority="6">XISB Tech</th>
        <th data-priority="7">Status</th>
        <th data-priority="8">Department</th>
        <th data-priority="9">Location</th>
        <th data-priority="10">Equipment Type</th>
        <th data-priority="11">Model/Serial Number</th>
        <th data-priority="12">Nature of Defect</th>
        <th data-priority="13">Probable Cause</th>
        <th data-priority="14">Action Taken</th>
        <th data-priority="15">Remarks</th>
        <th data-priority="16">Created At</th>
        <th data-priority="17">Updated At</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>001</td>
        <td>John Doe</td>
        <td>123456</td>
        <td>2022-01-01</td>
        <td>10:00 AM</td>
        <td>Software Engineer</td>
        <td>Pending</td>
        <td>IT</td>
        <td>Head Office</td>
        <td>Laptop</td>
        <td>ABC123456</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>2022-01-01 10:00 AM</td>
        <td>2022-01-01 10:00 AM</td>
      </tr>
      <tr>
        <td>002</td>
        <td>Jane Doe</td>
        <td>789012</td>
        <td>2022-01-02</td>
        <td>11:00 AM</td>
        <td>Hardware Engineer</td>
        <td>In Progress</td>
        <td>IT</td>
        <td>Branch Office</td>
        <td>Desktop</td>
        <td>DEF789012</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
        <td>2022-01-02 11:00 AM</td>
        <td>2022-01-02 11:00 AM</td>
      </tr>
    </tbody>
  </table>
</div>
<!--/Card 2-->
  </div>
  <!--/container 2-->

  <!-- Add this script tag at the end of your HTML file -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>

  <script>
    $(document).ready(function() {
    // Initialize DataTables for both tables
    $('#example-1').DataTable({
      responsive: true
    });

    $('#example-2').DataTable({
      responsive: true
    });
  });

  
    // Fetch and display complaints
    fetch('/allcomplaints')
      .then(response => response.json())
      .then(data => {
        const complaintsTableBody = document.querySelector('#complaints-table tbody');
        data.forEach(complaint => {
          const row = document.createElement('tr');
          row.innerHTML = `
           <td>${complaint._id}</td>
              <td>${complaint.place}</td>
              <td>${complaint.date}</td>
              <td>${complaint.user_name}</td>
              <td>${complaint.department}</td>
              <td>${complaint.position}</td>
              <td>${complaint.contact_number}</td>
              <td>${complaint.email}</td>
              <td>${complaint.hardware_type}</td>
              <td>${complaint.hardware_serial_number}</td>
              <td>${complaint.comment}</td>
          `;
          complaintsTableBody.appendChild(row);
        });
      });

    // Fetch and display service reports
    fetch('/allservicereports')
      .then(response => response.json())
      .then(data => {
        const servicesTableBody = document.querySelector('#services-table tbody');
        data.forEach(serviceReport => {
          const row = document.createElement('tr');
          row.innerHTML = `
              <td>${serviceReport._id}</td>
              <td>${serviceReport.complaint_id}</td>
              <td>${serviceReport.eu_name}</td>
              <td>${serviceReport.job_card_number}</td>
              <td>${serviceReport.service_date}</td>
              <td>${serviceReport.service_time}</td>
              <td>${serviceReport.xisb_tech}</td>
              <td>${serviceReport.status}</td>
              <td>${serviceReport.department}</td>
              <td>${serviceReport.location}</td>
              <td>${serviceReport.equipment_type}</td>
              <td>${serviceReport.model_serial_number}</td>
              <td>${serviceReport.nature_of_defect}</td>
              <td>${serviceReport.probable_cause}</td>
              <td>${serviceReport.action_taken}</td>
              <td>${serviceReport.remarks}</td>
              <td>${serviceReport.created_at}</td>
              <td>${serviceReport.updated_at}</td>
          `;
          servicesTableBody.appendChild(row);
        });
      });
  </script>
</body>
</html>